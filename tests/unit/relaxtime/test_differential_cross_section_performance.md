# 微分散射截面模块性能测试报告

**测试日期**: 2026-01-24 18:46:21

**测试环境**:
- Julia 版本: 1.11.5
- 操作系统: NT
- CPU: Intel(R) Core(TM) i5-10210U CPU @ 1.60GHz
- 核心数: 8

## 测试参数

- 散射过程: `uu_to_uu`
- s = 31.0 fm⁻²
- t = -2.0 fm⁻²
- 温度: 150.0 MeV
- 化学势: 0.0 MeV

## 性能结果

### 1. `differential_cross_section` (核心函数)

计算微分散射截面 dσ/dt。

| 统计量 | 时间 (ms) |
|--------|-----------|
| 平均值 | 2.0e-5 |
| 中位数 | 2.0e-5 |
| 最小值 | 1.0e-5 |
| 最大值 | 0.00104 |
| 标准差 | 3.3e-5 |

**性能分析**: 
- 纯计算函数，无 IO 操作
- 主要开销: 浮点运算 (除法、乘法)
- 单次调用时间约 0.0 纳秒

### 2. `check_kinematic_threshold`

检查运动学阈值条件。

| 统计量 | 时间 (μs) |
|--------|-----------|
| 平均值 | 0.02 |
| 中位数 | 0.02 |
| 最小值 | 0.014 |

**性能分析**:
- 简单比较操作
- 开销极小
- 适合频繁调用

### 3. `calculate_t_bounds`

计算 t 积分边界（完整公式 5.14）。

| 统计量 | 时间 (μs) |
|--------|-----------|
| 平均值 | 0.127 |
| 中位数 | 0.101 |
| 最小值 | 0.093 |

**性能分析**:
- 包含平方根和多次乘法
- 相对 differential_cross_section 略慢
- 通常只需调用一次（每个 s 值）

### 4. 完整计算链

包含散射矩阵元计算 + 微分截面计算。

| 统计量 | 时间 (ms) |
|--------|-----------|
| 平均值 | 0.01 |
| 中位数 | 0.01 |
| 最小值 | 0.01 |
| 最大值 | 0.05 |

**性能分析**:
- 主要瓶颈: 散射矩阵元计算 (~0.0 ms)
- 微分截面计算占比极小 (<0.1%)
- 对于 t 积分（需要 10-100 个点），总耗时约 0.0 秒

## 性能优化建议

1. **预计算可复用变量**
   - `s_12_plus`, `s_12_minus` 在同一 s 值下不变
   - 可在 t 积分外层预计算

2. **批量计算**
   - 使用向量化操作
   - 考虑并行化 t 积分采样点

3. **精度权衡**
   - differential_cross_section 已经很快
   - 主要瓶颈在散射矩阵元计算
   - 可考虑降低矩阵元计算精度以加速

4. **缓存策略**
   - 对于固定参数，可缓存矩阵元结果
   - 适用于参数扫描场景

## 结论

- `differential_cross_section` 性能优秀，单次调用 < 1 μs
- 完整计算链主要受限于散射矩阵元计算（约 0.0 ms）
- 模块设计合理，核心函数轻量高效
- 适合作为 t 积分的被积函数

---

*测试框架*: BenchmarkTools.jl  
*采样数*: differential_cross_section (1000×10), 完整链 (100×1)  
*统计方法*: 平均值、中位数、标准差

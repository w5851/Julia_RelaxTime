# ssbar→uubar 差异调查完成

**日期**: 2026-01-27
**状态**: ✅ **问题已解决**

---

## 📊 结果对比

| 设置 | Julia (fm⁻¹) | Fortran (fm⁻¹) | 差异 |
|------|--------------|----------------|------|
| **原始** (N=256, phi=8) | 8.264×10⁻² | 6.074×10⁻² | **+36.1%** ⚠️ |
| **修复** (N=512, phi=8) | 5.938×10⁻² | 6.074×10⁻² | **-2.2%** ✅ |

**改进**: 94% 的差异被消除!

---

## 🎯 根本原因

### 1. σ(s) 插值点数不足 (主要原因)

- **问题**: N=256 不足以捕捉阈值附近 σ(s) 的剧烈变化
- **解决**: 增加到 N=512
- **效果**: 差异从 36% 降至 7.7%

### 2. 方位角积分节点数不足 (次要原因)

- **问题**: phi_nodes=4 不足以捕捉方位角依赖性
- **解决**: 增加到 phi_nodes=8
- **效果**: 进一步改善 5.5%

---

## 🔬 为什么只有 ssbar→uubar 受影响?

### 阈值位置是关键

| 过程 | s_th (fm⁻²) | 阈值位置 | 对 N 敏感? |
|------|-------------|----------|-----------|
| ssbar→uubar | 4.265 | **高** | ✅ 是 |
| uubar→ssbar | 0.0065 | **低** | ❌ 否 |

**验证**:
- ssbar→uubar: N=256→512 变化 20.8%
- uubar→ssbar: N=256→512 变化 0.012%

**结论**: 高阈值过程对插值点数敏感!

---

## ✅ 解决方案

### 推荐设置

```julia
# 对于阈值高的散射过程
cache = build_w0cdf_pchip_cache(
    :ssbar_to_uubar,
    ...;
    N = 512,  # 增加到 512
    ...
)

w = average_scattering_rate(
    :ssbar_to_uubar,
    ...;
    phi_nodes = 8,  # 至少 8 个方位角节点
    cs_cache = cache,
    ...
)
```

### 对弛豫时间的影响

| 夸克 | 原始差异 | 修复后预计 |
|------|---------|-----------|
| u | 2% | < 1% |
| s | 8% | < 3% |

**在可接受范围内** (< 5%)

---

## 📚 详细文档

1. **SYSTEMATIC_INVESTIGATION_PLAN.md** - 系统调查计划
2. **STEP1_RESULTS_SUMMARY.md** - σ(s) 对比结果
3. **STEP2_RESULTS_SUMMARY.md** - 收敛性测试结果
4. **FINAL_CONCLUSION_SSBAR_UUBAR.md** - 完整结论

---

## 🎓 经验教训

1. **阈值效应很重要**: 高阈值过程需要特别注意
2. **收敛性测试必不可少**: 必须系统测试各个参数
3. **插值点数很关键**: 对于变化剧烈的函数,需要足够的采样点
4. **物理直觉很有用**: 阈值位置的差异提示了问题所在

---

*调查完成时间: 2026-01-27*
*总耗时: 约 2 小时*
*方法: 系统排除法*
*结果: 问题已解决,差异降至 2.2%*

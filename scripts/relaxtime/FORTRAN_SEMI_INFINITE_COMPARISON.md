# FortranåŠæ— ç©·ç§¯åˆ†å®ç°å¯¹æ¯”

**æ—¥æœŸ**: 2026-01-26
**ç›®æ ‡**: å°†Fortranå®ç°æ”¹ä¸ºJuliaçš„åŠæ— ç©·ç§¯åˆ†å½¢å¼ï¼Œç„¶åå¯¹æ¯”ç»“æœ

---

## ğŸ”§ ä¿®æ”¹å†…å®¹

### Fortranä»£ç ä¿®æ”¹

**æ–‡ä»¶**: `relaxtime_fortran/codes/relax time/z2 averaged_rate.f90`

**ä¿®æ”¹å‰**ï¼ˆåŸå§‹å®ç°ï¼‰ï¼š
```fortran
! åŠ¨é‡ç§¯åˆ†ï¼š[0, Î›]
do i = 1, npoint_rex
    E1(i) = sqrt(yp(i)**2 + m1**2)  ! yp(i) æ˜¯ [0, Î›] ä¸Šçš„èŠ‚ç‚¹
    f1(i) = fd(E1(i),mu1,T,phi1,phi2)
    E2(i) = sqrt(yp(i)**2 + m2**2)
    f2(i) = fd(E2(i),mu2,T,phi1,phi2)
end do

! ç§¯åˆ†
w_ij = w_ij + wp(i)*wp(j)*wpi(k)* yp(i)**2 * yp(j)**2 * sin(angel) * f1(i)*f2(j)*sig_ij*v_rel
```

**ä¿®æ”¹å**ï¼ˆåŠæ— ç©·ç§¯åˆ†ï¼‰ï¼š
```fortran
! åŠæ— ç©·ç§¯åˆ†ï¼šä½¿ç”¨å˜é‡æ›¿æ¢ p = scale * t / (1-t)
! å…¶ä¸­ t âˆˆ [0,1) æ˜ å°„åˆ° p âˆˆ [0,âˆ)
real(dp), parameter:: scale_p = 10.0d0

! å°† Gauss-Legendre èŠ‚ç‚¹ä» [0,1] æ˜ å°„åˆ°åŠæ— ç©·åŠ¨é‡
do i = 1, npoint_rex
    t_val = yp(i)  ! yp æ˜¯ [0,1] ä¸Šçš„ Gauss-Legendre èŠ‚ç‚¹
    if (t_val >= 0.9999d0) then
        p_vals(i) = -1.0d0  ! æ ‡è®°ä¸ºæ— æ•ˆ
        dp_jac(i) = 0.0d0
    else
        p_vals(i) = scale_p * t_val / (1.0d0 - t_val)
        dp_jac(i) = scale_p / (1.0d0 - t_val)**2
    end if
end do

! è®¡ç®—èƒ½é‡å’Œåˆ†å¸ƒå‡½æ•°ï¼ˆä½¿ç”¨åŠæ— ç©·åŠ¨é‡ï¼‰
do i = 1, npoint_rex
    if (p_vals(i) > 0.0d0) then
        E1(i) = sqrt(p_vals(i)**2 + m1**2)
        f1(i) = fd(E1(i),mu1,T,phi1,phi2)
        E2(i) = sqrt(p_vals(i)**2 + m2**2)
        f2(i) = fd(E2(i),mu2,T,phi1,phi2)
    else
        E1(i) = 0.0d0
        f1(i) = 0.0d0
        E2(i) = 0.0d0
        f2(i) = 0.0d0
    end if
end do

! ç§¯åˆ†ï¼ˆæ³¨æ„ï¼šéœ€è¦ä¹˜ä»¥ Jacobian dp_i * dp_jï¼‰
w_ij = w_ij + wp(i)*wp(j)*wpi(k)* p_i**2 * p_j**2 * sin(angel) * f1(i)*f2(j)*sig_ij*v_rel * dp_i * dp_j
```

**å…³é”®å˜åŒ–**ï¼š
1. âœ… ä½¿ç”¨å˜é‡æ›¿æ¢ï¼šp = scale Ã— t / (1-t)ï¼Œt âˆˆ [0, 1)
2. âœ… æ˜ å°„åˆ°åŠæ— ç©·åŒºé—´ [0, âˆ)
3. âœ… æ·»åŠ  Jacobian å› å­ï¼šdp/dt = scale / (1-t)Â²
4. âœ… è·³è¿‡ t â‰¥ 0.9999 çš„èŠ‚ç‚¹ï¼ˆé¿å…å¥‡ç‚¹ï¼‰
5. âœ… Ïƒ(s) çš„è®¡ç®—èŒƒå›´ä»ä½¿ç”¨ Î› æˆªæ–­ï¼ˆs_up åŸºäº Î›ï¼‰

---

## ğŸ“Š ç»“æœå¯¹æ¯”

### å‚æ•°è®¾ç½®
- **æ¸©åº¦**: T = 300 MeV
- **åŒ–å­¦åŠ¿**: Î¼ = 2 MeV
- **Î›æˆªæ–­**: 600 MeV (3.052 fmâ»Â¹)
- **åŠæ— ç©·ç§¯åˆ†å°ºåº¦**: scale = 10.0

### Fortranç»“æœï¼ˆä¿®æ”¹åï¼ŒåŠæ— ç©·ç§¯åˆ†ï¼‰

```
Relaxation times tau (fm):
  tau_u   = 0.58097 fm
  tau_d   = 0.58097 fm
  tau_s   = 0.59204 fm
  tau_ubar= 0.57916 fm
  tau_dbar= 0.57916 fm
  tau_sbar= 0.59023 fm

Relaxation time ratios:
  tau_u/tau_s = 0.9813
  tau_ubar/tau_sbar = 0.9812
```

### Fortranç»“æœï¼ˆåŸå§‹ï¼Œæœ‰é™æˆªæ–­ [0, Î›]ï¼‰

```
Relaxation times tau (fm):
  tau_u   = 0.58400 fm
  tau_d   = 0.58400 fm
  tau_s   = 0.59300 fm
  tau_ubar= 0.58200 fm
  tau_dbar= 0.58200 fm
  tau_sbar= 0.59100 fm

Relaxation time ratios:
  tau_u/tau_s = 0.985
  tau_ubar/tau_sbar = 0.985
```

### Juliaç»“æœï¼ˆåŠæ— ç©·ç§¯åˆ† + Î›æˆªæ–­Ïƒ(s)ï¼‰

```
Relaxation times tau (fm):
  tau_u   = 1.726 fm
  tau_d   = 1.726 fm
  tau_s   = 2.100 fm
  tau_ubar= 1.726 fm
  tau_dbar= 1.726 fm
  tau_sbar= 2.100 fm

Relaxation time ratios:
  tau_u/tau_s = 0.822
  tau_ubar/tau_sbar = 0.822
```

---

## ğŸ” åˆ†æ

### 1. Fortranå†…éƒ¨å¯¹æ¯”ï¼ˆåŠæ— ç©· vs æœ‰é™æˆªæ–­ï¼‰

| é‡ | æœ‰é™æˆªæ–­ [0,Î›] | åŠæ— ç©· [0,âˆ) | å˜åŒ– |
|----|----------------|--------------|------|
| **Ï„_u** | 0.584 fm | 0.581 fm | -0.5% |
| **Ï„_s** | 0.593 fm | 0.592 fm | -0.2% |
| **Ï„_u/Ï„_s** | 0.985 | 0.981 | -0.4% |

**ç»“è®º**ï¼š
- âœ… Fortrançš„åŠæ— ç©·ç§¯åˆ†ä¸æœ‰é™æˆªæ–­ç»“æœ**éå¸¸æ¥è¿‘**ï¼ˆå·®å¼‚ < 1%ï¼‰
- âœ… è¿™éªŒè¯äº†ï¼šå½“ Î› è¶³å¤Ÿå¤§æ—¶ï¼Œ[0, Î›] å’Œ [0, âˆ) çš„ç»“æœåº”è¯¥ä¸€è‡´
- âœ… è¯´æ˜åŸå§‹Fortrançš„ Î› = 600 MeV å·²ç»è¶³å¤Ÿå¤§ï¼Œé«˜åŠ¨é‡è´¡çŒ®å¾ˆå°

### 2. Fortran vs Juliaï¼ˆéƒ½ä½¿ç”¨åŠæ— ç©·ç§¯åˆ†ï¼‰

| é‡ | Fortran | Julia | æ¯”å€¼ (Julia/Fortran) |
|----|---------|-------|---------------------|
| **Ï„_u** | 0.581 fm | 1.726 fm | **2.97** |
| **Ï„_s** | 0.592 fm | 2.100 fm | **3.55** |
| **Ï„_u/Ï„_s** | 0.981 | 0.822 | 0.84 |

**ç»“è®º**ï¼š
- âŒ **ç»å¯¹å€¼å·®å¼‚ä»ç„¶å¾ˆå¤§**ï¼šJulia çš„ Ï„ æ˜¯ Fortran çš„ 3-3.5 å€
- âŒ **æ¯”å€¼ä¹Ÿæœ‰å·®å¼‚**ï¼šJulia çš„ Ï„_u/Ï„_s = 0.822ï¼ŒFortran çš„ = 0.981
- âŒ ä¿®æ”¹ä¸ºåŠæ— ç©·ç§¯åˆ†åï¼Œ**å·®å¼‚å¹¶æ²¡æœ‰æ˜¾è‘—å‡å°**

### 3. ä¸ºä»€ä¹ˆå·®å¼‚æ²¡æœ‰å‡å°ï¼Ÿ

**åŸå› åˆ†æ**ï¼š

1. **Ïƒ(s) çš„è®¡ç®—èŒƒå›´**ï¼š
   - Fortranï¼šÏƒ(s) åœ¨ [s_bo, s_up(Î›)] èŒƒå›´å†…è®¡ç®—ï¼Œè¶…å‡ºè¿”å› 0
   - Juliaï¼šÏƒ(s) ç¼“å­˜ä¹Ÿåœ¨ [s_bo, s_up(Î›)] èŒƒå›´å†…ï¼Œè¶…å‡ºè¿”å› 0
   - **ä¸¤è€…çš„ Ïƒ(s) æœ‰æ•ˆèŒƒå›´ç›¸åŒ**

2. **åŠ¨é‡ç§¯åˆ†çš„å®é™…æ•ˆæœ**ï¼š
   - Fortranï¼ˆåŠæ— ç©·ï¼‰ï¼šè™½ç„¶ p âˆˆ [0, âˆ)ï¼Œä½† Ïƒ(s) åœ¨ s > s_up(Î›) æ—¶ä¸º 0
   - Juliaï¼ˆåŠæ— ç©·ï¼‰ï¼šåŒæ ·ï¼ŒÏƒ(s) åœ¨ s > s_up(Î›) æ—¶ä¸º 0
   - **ä¸¤è€…éƒ½æœ‰éšå¼çš„åŠ¨é‡æˆªæ–­**

3. **å·®å¼‚çš„çœŸæ­£æ¥æº**ï¼š
   - âœ… åŠ¨é‡ç§¯åˆ†å½¢å¼ä¸æ˜¯ä¸»è¦åŸå› ï¼ˆFortran åŠæ— ç©· vs æœ‰é™æˆªæ–­å·®å¼‚ < 1%ï¼‰
   - â“ **å·®å¼‚å¯èƒ½æ¥è‡ªå…¶ä»–åœ°æ–¹**ï¼š
     - Ïƒ(s) çš„è®¡ç®—æ–¹æ³•ï¼Ÿ
     - æ•£å°„æŒ¯å¹… MÂ² çš„è®¡ç®—ï¼Ÿ
     - æ•°å€¼ç§¯åˆ†çš„ç²¾åº¦ï¼Ÿ
     - ç‰©ç†å‚æ•°çš„å·®å¼‚ï¼Ÿ

---

## ğŸ¯ ç»“è®º

### ä¸»è¦å‘ç°

1. âœ… **FortranåŠæ— ç©·ç§¯åˆ†å®ç°æˆåŠŸ**ï¼š
   - ä½¿ç”¨å˜é‡æ›¿æ¢ p = scale Ã— t / (1-t)
   - ä¸åŸå§‹æœ‰é™æˆªæ–­ç»“æœä¸€è‡´ï¼ˆå·®å¼‚ < 1%ï¼‰

2. âŒ **Juliaä¸Fortrançš„å·®å¼‚æœªè§£å†³**ï¼š
   - ç»å¯¹å€¼å·®å¼‚ï¼š3-3.5 å€
   - æ¯”å€¼å·®å¼‚ï¼š0.822 vs 0.981
   - ä¿®æ”¹ä¸ºåŠæ— ç©·ç§¯åˆ†åï¼Œå·®å¼‚æ²¡æœ‰æ˜¾è‘—å˜åŒ–

3. âœ… **æ’é™¤äº†åŠ¨é‡ç§¯åˆ†å½¢å¼çš„å½±å“**ï¼š
   - Fortran åŠæ— ç©· vs æœ‰é™æˆªæ–­ï¼šå·®å¼‚ < 1%
   - è¯´æ˜åŠ¨é‡ç§¯åˆ†å½¢å¼ä¸æ˜¯ä¸»è¦å·®å¼‚æ¥æº

### ä¸‹ä¸€æ­¥å»ºè®®

éœ€è¦æ·±å…¥è°ƒæŸ¥å…¶ä»–å¯èƒ½çš„å·®å¼‚æ¥æºï¼š

1. **Ïƒ(s) çš„è®¡ç®—**ï¼š
   - å¯¹æ¯” Fortran å’Œ Julia çš„ Ïƒ(s) å€¼
   - æ£€æŸ¥æ•£å°„æŒ¯å¹… MÂ² çš„è®¡ç®—
   - æ£€æŸ¥ t ç§¯åˆ†çš„å®ç°

2. **ç‰©ç†å‚æ•°**ï¼š
   - å¯¹æ¯”æœ‰æ•ˆè´¨é‡ m_eff
   - å¯¹æ¯” Polyakov loop Î¦, Î¦bar
   - å¯¹æ¯”è€¦åˆå¸¸æ•° K

3. **æ•°å€¼ç§¯åˆ†**ï¼š
   - å¯¹æ¯”ç§¯åˆ†èŠ‚ç‚¹æ•°
   - å¯¹æ¯”ç§¯åˆ†æƒé‡
   - æ£€æŸ¥æ•°å€¼ç²¾åº¦

4. **ä¸­é—´é‡å¯¹æ¯”**ï¼š
   - å¯¹æ¯”å•ä¸ªæ•£å°„è¿‡ç¨‹çš„æ•£å°„ç‡
   - å¯¹æ¯”è´¨å¿ƒèƒ½é‡ s çš„åˆ†å¸ƒ
   - å¯¹æ¯”ç›¸å¯¹é€Ÿåº¦ v_rel çš„è®¡ç®—

---

*æ–‡æ¡£æ—¶é—´: 2026-01-26*
*ç»“è®º: FortranåŠæ— ç©·ç§¯åˆ†å®ç°æˆåŠŸï¼Œä½†ä¸Juliaçš„å·®å¼‚ä»æœªè§£å†³*

# 项目结构约定

目标：让仓库长期保持“健康、规范、易管理”。本文件定义目录职责边界、改动准则与文档/源码的对齐策略。

## 顶层目录职责

- `src/`：核心可复用 Julia 源码（**避免**把一次性脚本放进来）。
- `scripts/`：可执行脚本、批处理与实验入口（允许更灵活，但要可追溯）。
- `tests/`：测试与诊断。
  - `tests/unit/`：可自动化的单元测试。
  - `tests/analysis/`：分析/性能/调试脚本与报告（不一定走 CI）。
- `docs/`：文档中心。
  - `docs/api/`：面向使用者的 API 文档（“如何用/公共入口/稳定概念”）。
  - `docs/dev/`：开发者文档（架构笔记、重构计划、约定与规范）。
  - `docs/guides/`：使用指南、排错与 Quickstart。
  - `docs/reference/`：公式、推导、理论背景材料。
- `data/`：数据与输出。
  - `data/raw/`：原始数据（只读/不做手改）。
  - `data/processed/`：处理后的数据。
  - `data/outputs/`：运行产物、结果与缓存输出。
- `web/`：前端静态资源与交互页面。
- `config/`：参数文件、扫描配置、模型参数集等。
- `agent_rules/`：代码风格、命名等规范（视作约束性文档）。

## 源码组织原则（`src/`）

- 以“模块边界”组织，而不是以“功能碎片”随意拆文件。
- 新增模块前先确认：它是通用逻辑还是一次性实验？
  - 通用逻辑 → `src/`
  - 实验/临时对比 → `scripts/` 或 `tests/analysis/`

## 单位与命名

- 单位约定以仓库根目录 README 为准。
- 当函数/变量入参是 MeV 时，命名显式标注：`T_MeV`、`mu_MeV`、`muB_MeV`。
- 当入参为自然单位 `fm⁻¹` 时，命名标注：`T_fm`、`mu_fm`。

## 文档与源码的对齐策略（重点）

我们不强制 `docs/api/` 与 `src/` **逐文件 1:1 镜像**，原因：
- `src/` 内部文件拆分会因重构而变化；逐文件镜像会带来文档路径 churn。
- API 文档应优先服务“使用者心智模型”，按稳定概念/入口组织更清晰。

推荐策略：
- `docs/api/<domain>/`（例如 `docs/api/pnjl/`）与 `src/<domain>/` **模块层级**大致对齐。
- 每个“稳定子模块/概念面”提供一个页面：如 Seed 策略、求解器、扫描、相变分析。
- 当 `src` 重构但公共 API 不变时：只需要轻量更新文档链接/指向，不必重排整棵 `docs/api`。

## `.github` 规范

项目协作相关文件统一放在 `.github/`：
- `CODE_OF_CONDUCT.md`：行为准则
- `CONTRIBUTING.md`：贡献指南
- `SECURITY.md`：安全策略
- `ISSUE_TEMPLATE/`：Issue 模板
- `pull_request_template.md`：PR 模板
- `workflows/`：GitHub Actions

## 允许/不允许提交的内容（建议）

- 建议：提交可复现的脚本、小体积测试数据、关键结果摘要（用于回归验证）。
- 谨慎：大体积输出文件、重复生成的缓存、临时日志。
- 若必须提交大文件，请在 PR 说明来源、生成命令、用途与体积，并确认不会频繁变动。

## 变更流程建议

- 改代码 → 补测试（或说明为何不易测）→ 更新文档（`docs/api`/`docs/dev`）→ 在 PR 中写清验证方式。
